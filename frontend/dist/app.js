(function() {
  angular.module('RPiCar', ['ngResource', 'ngSanitize', 'ngRoute', 'ngAnimate', 'ui.bootstrap', 'swUtils', 'swWebSocket']).config(function($routeProvider) {
    return $routeProvider.when('/', {
      templateUrl: 'controllers/car.html',
      controller: 'CarCtrl',
      label: 'Car'
    });
  }).run(function($location, $rootScope, swTitle) {
    $rootScope.swTitle = swTitle;
    return $rootScope.$on('$routeChangeSuccess', function(event, current, previous) {
      var baseTitle, ref;
      baseTitle = ((ref = current.$$route) != null ? ref.label : void 0) || '';
      swTitle.setTitleBase(baseTitle);
      swTitle.setTitleStart('');
      return swTitle.setTitleEnd('');
    });
  }).config(function($httpProvider) {
    return $httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';
  });

}).call(this);

(function() {
  var BACKWARD_KEY_CODE, BTN_DIRECTIONS, FORWARD_KEY_CODE, LEFT_KEY_CODE, RIGHT_KEY_CODE, SPACE_KEY_CODE, _getDirection, sendMoveStatus;

  SPACE_KEY_CODE = 32;

  FORWARD_KEY_CODE = 38;

  BACKWARD_KEY_CODE = 40;

  LEFT_KEY_CODE = 37;

  RIGHT_KEY_CODE = 39;

  BTN_DIRECTIONS = {
    forwardBtn: 'forward',
    backwardBtn: 'backward',
    leftBtn: 'left',
    rightBtn: 'right'
  };

  angular.module('RPiCar').controller('CarCtrl', function($scope, $routeParams, $log, $interval) {
    var carId;
    $scope.moveStatus = {
      forward: false,
      backward: false,
      left: false,
      right: false
    };
    carId = $routeParams.id;
    $scope.car = {
      name: 'Марк 1',
      address: '192.168.150.109'
    };
    $scope.commandLog = [];
    $scope.carCommandHandler = function(commandResponse) {
      var item;
      item = {
        response: JSON.parse(commandResponse),
        dt: new Date()
      };
      $scope.commandLog.unshift(item);
      if ($scope.commandLog.length > 5) {
        return $scope.commandLog.length = 5;
      }
    };
    $scope.move = function(direction, state) {
      var oldState;
      oldState = $scope.moveStatus[direction];
      $scope.moveStatus[direction] = state;
      if (oldState !== state) {
        return sendMoveStatus($scope.moveStatus);
      }
    };
    $scope.keyDownHandler = function(event) {
      var direction;
      direction = _getDirection(event);
      if (direction) {
        return $scope.move(direction, true);
      }
    };
    return $scope.keyUpHandler = function(event) {
      var direction;
      direction = _getDirection(event);
      if (direction) {
        return $scope.move(direction, false);
      }
    };
  });

  _getDirection = function(event) {
    var direction;
    if (event.keyCode === SPACE_KEY_CODE && event.target.type === 'button') {
      direction = BTN_DIRECTIONS[event.target.id];
      return direction;
    }
    if (event.keyCode === FORWARD_KEY_CODE) {
      return 'forward';
    }
    if (event.keyCode === BACKWARD_KEY_CODE) {
      return 'reverse';
    }
    if (event.keyCode === LEFT_KEY_CODE) {
      return 'left';
    }
    if (event.keyCode === RIGHT_KEY_CODE) {
      return 'right';
    }
    return void 0;
  };

  sendMoveStatus = function(moveStatus) {
    var data;
    data = JSON.stringify(moveStatus);
    return console.debug(moveStatus);
  };

}).call(this);

(function() {
  angular.module('RPiCar').controller('MainCtrl', function($scope, $log) {
    return $scope.cars = [
      {
        id: '1',
        name: 'Марк 1'
      }
    ];
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9hcHAuY29mZmVlIiwiYXBwL2NvbnRyb2xsZXJzL2Nhci5jb2ZmZWUiLCJhcHAvY29udHJvbGxlcnMvbWFpbi5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFBQSxPQUFPLENBQUMsTUFBUixDQUFlLFFBQWYsRUFBeUIsQ0FDckIsWUFEcUIsRUFFckIsWUFGcUIsRUFHckIsU0FIcUIsRUFJckIsV0FKcUIsRUFNckIsY0FOcUIsRUFRckIsU0FScUIsRUFTckIsYUFUcUIsQ0FBekIsQ0FhQSxDQUFDLE1BYkQsQ0FhUSxTQUFDLGNBQUQ7V0FDSixjQUNJLENBQUMsSUFETCxDQUNVLEdBRFYsRUFFTTtNQUFBLFdBQUEsRUFBYSxzQkFBYjtNQUNBLFVBQUEsRUFBWSxTQURaO01BRUEsS0FBQSxFQUFPLEtBRlA7S0FGTjtFQURJLENBYlIsQ0FnQ0EsQ0FBQyxHQWhDRCxDQWdDSyxTQUFDLFNBQUQsRUFBWSxVQUFaLEVBQXdCLE9BQXhCO0lBQ0QsVUFBVSxDQUFDLE9BQVgsR0FBcUI7V0FDckIsVUFBVSxDQUFDLEdBQVgsQ0FBZSxxQkFBZixFQUFzQyxTQUFDLEtBQUQsRUFBUSxPQUFSLEVBQWlCLFFBQWpCO0FBQ2xDLFVBQUE7TUFBQSxTQUFBLHlDQUEyQixDQUFFLGVBQWpCLElBQTBCO01BQ3RDLE9BQU8sQ0FBQyxZQUFSLENBQXFCLFNBQXJCO01BQ0EsT0FBTyxDQUFDLGFBQVIsQ0FBc0IsRUFBdEI7YUFDQSxPQUFPLENBQUMsV0FBUixDQUFvQixFQUFwQjtJQUprQyxDQUF0QztFQUZDLENBaENMLENBeUNBLENBQUMsTUF6Q0QsQ0F5Q1EsU0FBQyxhQUFEO1dBQ0osYUFBYSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSyxDQUFBLGNBQUEsQ0FBcEMsR0FBc0Q7RUFEbEQsQ0F6Q1I7QUFBQTs7O0FDQUE7QUFBQSxNQUFBOztFQUFBLGNBQUEsR0FBaUI7O0VBRWpCLGdCQUFBLEdBQW1COztFQUNuQixpQkFBQSxHQUFvQjs7RUFD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ZDtFQUZhO0FBakZqQjs7O0FDQUE7RUFBQSxPQUFPLENBQUMsTUFBUixDQUFlLFFBQWYsQ0FDQSxDQUFDLFVBREQsQ0FDWSxVQURaLEVBQ3dCLFNBQUMsTUFBRCxFQUFTLElBQVQ7V0FFcEIsTUFBTSxDQUFDLElBQVAsR0FBYztNQUFDO1FBQ1gsRUFBQSxFQUFJLEdBRE87UUFFWCxJQUFBLEVBQU0sUUFGSztPQUFEOztFQUZNLENBRHhCO0FBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ1JQaUNhcicsIFtcbiAgICAnbmdSZXNvdXJjZSdcbiAgICAnbmdTYW5pdGl6ZSdcbiAgICAnbmdSb3V0ZSdcbiAgICAnbmdBbmltYXRlJ1xuXG4gICAgJ3VpLmJvb3RzdHJhcCdcblxuICAgICdzd1V0aWxzJ1xuICAgICdzd1dlYlNvY2tldCdcbl0pXG5cblxuLmNvbmZpZyAoJHJvdXRlUHJvdmlkZXIpIC0+XG4gICAgJHJvdXRlUHJvdmlkZXJcbiAgICAgICAgLndoZW4oJy8nLFxuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29udHJvbGxlcnMvY2FyLmh0bWwnXG4gICAgICAgICAgY29udHJvbGxlcjogJ0NhckN0cmwnXG4gICAgICAgICAgbGFiZWw6ICdDYXInXG4gICAgICAgIClcbiMgICAgICAgIC53aGVuKCcvJyxcbiMgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb250cm9sbGVycy9tYWluLmh0bWwnXG4jICAgICAgICAgIGNvbnRyb2xsZXI6ICdNYWluQ3RybCdcbiMgICAgICAgICAgbGFiZWw6ICcnXG4jICAgICAgICApXG4jICAgICAgICAud2hlbignL2Nhci86aWQvJyxcbiMgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb250cm9sbGVycy9jYXIuaHRtbCdcbiMgICAgICAgICAgY29udHJvbGxlcjogJ0NhckN0cmwnXG4jICAgICAgICAgIGxhYmVsOiAnQ2FyJ1xuIyAgICAgICAgKVxuXG5cbi5ydW4gKCRsb2NhdGlvbiwgJHJvb3RTY29wZSwgc3dUaXRsZSkgLT5cbiAgICAkcm9vdFNjb3BlLnN3VGl0bGUgPSBzd1RpdGxlXG4gICAgJHJvb3RTY29wZS4kb24gJyRyb3V0ZUNoYW5nZVN1Y2Nlc3MnLCAoZXZlbnQsIGN1cnJlbnQsIHByZXZpb3VzKSAtPlxuICAgICAgICBiYXNlVGl0bGUgPSBjdXJyZW50LiQkcm91dGU/LmxhYmVsIG9yICcnXG4gICAgICAgIHN3VGl0bGUuc2V0VGl0bGVCYXNlKGJhc2VUaXRsZSlcbiAgICAgICAgc3dUaXRsZS5zZXRUaXRsZVN0YXJ0KCcnKVxuICAgICAgICBzd1RpdGxlLnNldFRpdGxlRW5kKCcnKVxuXG5cbi5jb25maWcgKCRodHRwUHJvdmlkZXIpIC0+XG4gICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLnBvc3RbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCciLCJTUEFDRV9LRVlfQ09ERSA9IDMyXG5cbkZPUldBUkRfS0VZX0NPREUgPSAzOFxuQkFDS1dBUkRfS0VZX0NPREUgPSA0MFxuTEVGVF9LRVlfQ09ERSA9IDM3XG5SSUdIVF9LRVlfQ09ERSA9IDM5XG5cbkJUTl9ESVJFQ1RJT05TID0ge1xuICAgIGZvcndhcmRCdG46ICdmb3J3YXJkJ1xuICAgIGJhY2t3YXJkQnRuOiAnYmFja3dhcmQnXG4gICAgbGVmdEJ0bjogJ2xlZnQnXG4gICAgcmlnaHRCdG46ICdyaWdodCdcbn1cblxuYW5ndWxhci5tb2R1bGUoJ1JQaUNhcicpXG4uY29udHJvbGxlciAnQ2FyQ3RybCcsICgkc2NvcGUsICRyb3V0ZVBhcmFtcywgJGxvZywgJGludGVydmFsKSAtPlxuXG4gICAgJHNjb3BlLm1vdmVTdGF0dXMgPSB7XG4gICAgICAgIGZvcndhcmQ6IGZhbHNlXG4gICAgICAgIGJhY2t3YXJkOiBmYWxzZVxuICAgICAgICBsZWZ0OiBmYWxzZVxuICAgICAgICByaWdodDogZmFsc2VcbiAgICB9XG5cbiAgICAjIFRPRE9cbiAgICBjYXJJZCA9ICRyb3V0ZVBhcmFtcy5pZFxuICAgICRzY29wZS5jYXIgPSB7XG4gICAgICAgIG5hbWU6ICfQnNCw0YDQuiAxJyxcbiAgICAgICAgYWRkcmVzczogJzE5Mi4xNjguMTUwLjEwOScsXG4gICAgfVxuXG4gICAgJHNjb3BlLmNvbW1hbmRMb2cgPSBbXVxuICAgICRzY29wZS5jYXJDb21tYW5kSGFuZGxlciA9IChjb21tYW5kUmVzcG9uc2UpIC0+XG4gICAgICAgIGl0ZW0gPSB7XG4gICAgICAgICAgICByZXNwb25zZTogSlNPTi5wYXJzZShjb21tYW5kUmVzcG9uc2UpXG4gICAgICAgICAgICBkdDogbmV3IERhdGUoKVxuICAgICAgICB9XG4gICAgICAgICRzY29wZS5jb21tYW5kTG9nLnVuc2hpZnQoaXRlbSlcblxuICAgICAgICBpZiAkc2NvcGUuY29tbWFuZExvZy5sZW5ndGggPiA1XG4gICAgICAgICAgICAkc2NvcGUuY29tbWFuZExvZy5sZW5ndGggPSA1XG5cblxuXG4gICAgJHNjb3BlLm1vdmUgPSAoZGlyZWN0aW9uLCBzdGF0ZSkgLT5cbiAgICAgICAgb2xkU3RhdGUgPSAkc2NvcGUubW92ZVN0YXR1c1tkaXJlY3Rpb25dXG4gICAgICAgICRzY29wZS5tb3ZlU3RhdHVzW2RpcmVjdGlvbl0gPSBzdGF0ZVxuICAgICAgICBpZiBvbGRTdGF0ZSAhPSBzdGF0ZVxuICAgICAgICAgICAgc2VuZE1vdmVTdGF0dXMoJHNjb3BlLm1vdmVTdGF0dXMpXG5cblxuICAgICRzY29wZS5rZXlEb3duSGFuZGxlciA9IChldmVudCkgLT5cbiAgICAgICAgZGlyZWN0aW9uID0gX2dldERpcmVjdGlvbihldmVudClcbiAgICAgICAgaWYgZGlyZWN0aW9uXG4gICAgICAgICAgICAkc2NvcGUubW92ZShkaXJlY3Rpb24sIHRydWUpXG5cbiAgICAkc2NvcGUua2V5VXBIYW5kbGVyID0gKGV2ZW50KSAtPlxuICAgICAgICBkaXJlY3Rpb24gPSBfZ2V0RGlyZWN0aW9uKGV2ZW50KVxuICAgICAgICBpZiBkaXJlY3Rpb25cbiAgICAgICAgICAgICRzY29wZS5tb3ZlKGRpcmVjdGlvbiwgZmFsc2UpXG5cblxuX2dldERpcmVjdGlvbiA9IChldmVudCkgLT5cbiAgICBpZiBldmVudC5rZXlDb2RlID09IFNQQUNFX0tFWV9DT0RFIGFuZCBldmVudC50YXJnZXQudHlwZSA9PSAnYnV0dG9uJ1xuICAgICAgICBkaXJlY3Rpb24gPSBCVE5fRElSRUNUSU9OU1tldmVudC50YXJnZXQuaWRdXG4gICAgICAgIHJldHVybiBkaXJlY3Rpb25cblxuICAgIGlmIGV2ZW50LmtleUNvZGUgPT0gRk9SV0FSRF9LRVlfQ09ERVxuICAgICAgICByZXR1cm4gJ2ZvcndhcmQnXG5cbiAgICBpZiBldmVudC5rZXlDb2RlID09IEJBQ0tXQVJEX0tFWV9DT0RFXG4gICAgICAgIHJldHVybiAncmV2ZXJzZSdcblxuICAgIGlmIGV2ZW50LmtleUNvZGUgPT0gTEVGVF9LRVlfQ09ERVxuICAgICAgICByZXR1cm4gJ2xlZnQnXG5cbiAgICBpZiBldmVudC5rZXlDb2RlID09IFJJR0hUX0tFWV9DT0RFXG4gICAgICAgIHJldHVybiAncmlnaHQnXG5cbiAgICByZXR1cm4gdW5kZWZpbmVkXG5cbnNlbmRNb3ZlU3RhdHVzID0gKG1vdmVTdGF0dXMpIC0+XG4gICAgZGF0YSA9IEpTT04uc3RyaW5naWZ5KG1vdmVTdGF0dXMpXG4gICAgY29uc29sZS5kZWJ1Zyhtb3ZlU3RhdHVzKSAgICMgVE9ET1xuIiwiYW5ndWxhci5tb2R1bGUoJ1JQaUNhcicpXG4uY29udHJvbGxlciAnTWFpbkN0cmwnLCAoJHNjb3BlLCAkbG9nKSAtPlxuICAgICMgVE9ET1xuICAgICRzY29wZS5jYXJzID0gW3tcbiAgICAgICAgaWQ6ICcxJyxcbiAgICAgICAgbmFtZTogJ9Cc0LDRgNC6IDEnLFxuICAgIH1dXG5cblxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
